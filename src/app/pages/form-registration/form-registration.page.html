<ion-content [fullscreen]="true">
  <div class="principal" [ngStyle]="{'background-image': 'url(' + imageHeader + ')'}"></div>

  <div class="justify-center">
    <ion-card>
      <ion-card-content>
        <div class="form-container">
      
          <div class="stepper">
            <div *ngFor="let step of steps; let i = index" 
                 [class.active]="i === currentStep" 
                 [class.completed]="i < currentStep" 
                 class="step">
              <div class="circle">
                <ng-container *ngIf="i < currentStep; else stepNumber">
                  <ion-icon name="checkmark" size="small"></ion-icon>
                </ng-container>
                <ng-template #stepNumber>{{ i + 1 }}</ng-template>
              </div>
              <div class="label">{{ step | translate }}</div>
            </div>
          </div>
      
          <div class="form-card">
            <ng-container [ngSwitch]="currentStep">
              <form *ngSwitchCase="0" [formGroup]="personalForm">
                <h1>{{ 'form_registration.gimnast_data' | translate }}</h1>
                <div class="input-rows">
                  <ion-input label="{{ 'form_registration.name' | translate }}*" labelPlacement="stacked" formControlName="name" placeholder="{{ 'form_registration.enter_name' | translate }}" fill="outline"></ion-input>
                  <ion-input label="{{ 'form_registration.surnames' | translate }}*" labelPlacement="stacked" formControlName="surnames" placeholder="{{ 'form_registration.enter_surnames' | translate }}" fill="outline"></ion-input>
                </div>
                <div class="input-rows">
                  <mat-form-field appearance="outline" style="width: 50%; margin-top: 10px;">
                    <mat-label>{{ 'form_registration.date_born' | translate }}</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="dateBorn">
                    <mat-hint>DD/MM/AAAA</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                  <ion-input label="{{ 'form_registration.dni' | translate }}*" labelPlacement="stacked" formControlName="dni" placeholder="{{ 'form_registration.enter_dni' | translate }}" fill="outline" style="width: 50%; margin-top: 10px;"></ion-input>
                </div>
                <div class="input-rows">
                  <ion-input label="{{ 'form_registration.cat_salut' | translate }}*" labelPlacement="stacked" formControlName="catSalut" placeholder="{{ 'form_registration.enter_cat_salut' | translate }}" fill="outline"></ion-input>
                  <ion-input label="{{ 'form_registration.location' | translate }}" labelPlacement="stacked" formControlName="address" placeholder="{{ 'form_registration.enter_location' | translate }}" fill="outline"></ion-input>
                </div>
                <ion-input label="{{ 'form_registration.has_illness' | translate }}" labelPlacement="floating" formControlName="address" fill="outline"></ion-input>
                <div class="input-rows">
                  <ion-col>
                    <h2>{{ 'form_registration.level' | translate }}*:</h2>
                    
                    <ion-radio-group formControlName="level">
                      <ion-item lines="none">
                        <ion-radio slot="start" value="escola_base"></ion-radio>
                        <ion-label>{{ 'form_registration.escola_base' | translate }}</ion-label>
                      </ion-item>
                    
                      <ion-item lines="none">
                        <ion-radio slot="start" value="competicio_escolar"></ion-radio>
                        <ion-label>{{ 'form_registration.competicio_escolar' | translate }}</ion-label>
                      </ion-item>
                    
                      <ion-item lines="none">
                        <ion-radio slot="start" value="competicio_federat"></ion-radio>
                        <ion-label>{{ 'form_registration.competicio_federat' | translate }}</ion-label>
                      </ion-item>
                    </ion-radio-group>                  
                  </ion-col>
                  <ion-col>
                    <h2>{{ 'form_registration.select_schedule' | translate }}*:</h2>
                    <div formArrayName="schedule">
                      <ion-item lines="none" *ngFor="let horariCtrl of schedule.controls; let i = index">
                        <ion-checkbox
                          slot="start"
                          [formControlName]="i">
                        </ion-checkbox>
                        <ion-label>{{ horarisLabels[i] | translate }}</ion-label>
                      </ion-item>
                    </div>
                  </ion-col>
                </div>
                <div style="display: flex; justify-content: end;">
                  <ion-button expand="block" (click)="nextStep()">{{ 'form_registration.next' | translate }}</ion-button>
                </div>
              </form>
      
              <form *ngSwitchCase="1" [formGroup]="addressForm">
                <h1>Address Details</h1>
                <ion-item>
                  <ion-label position="floating">Street Address</ion-label>
                  <ion-input formControlName="street" type="text"></ion-input>
                </ion-item>
  
                <ion-item>
                  <ion-label position="floating">City</ion-label>
                  <ion-input formControlName="city" type="text"></ion-input>
                </ion-item>
  
                <ion-button expand="block" (click)="prevStep()">Back</ion-button>
                <ion-button expand="block" (click)="nextStep()" [disabled]="!addressForm.valid">Next</ion-button>
              </form>      
            </ng-container>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>